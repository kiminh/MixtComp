
import pyMixtComp
import numpy as np

mu1, sigma1 = -2, 0.5
mu2, sigma2 = 2, 0.5
x1 = np.random.normal(mu1, sigma1, 70)
x2 = np.random.normal(mu2, sigma2, 30)

x = np.concatenate((x1, x2), axis=None)
xStr = [str(i) for i in x]


a1 = np.random.multinomial(1, [0.25, 0.25, 0.25, 0.25], 70)
a2 = np.random.multinomial(1, [0.5, 0.1, 0.1, 0.3], 30)
a = np.concatenate((a1, a2))
aStr = [str(np.where(i == 1)[0][0]+1) for i in a]

# data = { "gauss": xStr, "categ": aStr}
data = {
    "gauss": ['-2.4052256439757436', '-2.407308968562064', '-1.5205292828558357', '-2.7013841150843114', '-2.346715304872986', '-0.8813129697346884', '-2.1191149534002376', '-2.47383040610353', '-0.919293991184857', '-1.5619865015096692', '-1.8193617314575634', '-1.9426804909937176', '-0.6626430473216107', '-1.802251350988449', '-1.4066846225878302', '-1.8833791463226015', '-2.7295160235913043', '-1.718113861949452', '-2.9199718584354075', '-1.3405411726479832', '-2.2152763262771535', '-1.1942900428077756', '-1.836711517284815', '-2.1365920446719713', '-2.2286330827722183', '-1.6305217321255925', '-2.378870582428529', '-1.6308307267232631', '-2.274545974127854', '-2.266344961428556', '-2.389424488171864', '-2.365405065861307', '-2.7644589684317378', '-2.9566993976132294', '-0.6958803227459132', '-2.023370411847371', '-2.4294667288390452', '-2.172234607918273', '-1.1687922223954899', '-2.519527151810002', '-1.9145270154263656', '-2.2919146363881966', '-1.7083594157014477', '-2.338176791357404', '-1.6024825283712123', '-1.9670823938881568', '-2.310572490050856', '-2.3448257650451163', '-1.720735438407032', '-2.1576765654876575', '-1.70343433753135', '-1.7352251666154033', '-2.0742644597273943', '-1.6298479761296454', '-1.465870659766305', '-2.744711790642681', '-1.3736641783194126', '-2.9869061498486573', '-2.530771635486284', '-2.025397451946468', '-1.859881692609462', '-2.7290433234803104', '-2.879947450696053', '-2.2447626082012024', '-1.929595965586433', '-2.531466768324665', '-1.8232643587389759', '-2.557229523775085', '-1.9113326339919172', '-1.7438789699145136', '1.7954591459691565', '0.8977942756341228', '1.6228925692266505', '1.5585166280464982', '2.1402722259037725', '1.671254501135831', '2.1254347481655467', '1.9031712449454044', '1.77031843576854', '1.5201760919265366', '2.2520659388905564', '1.2000438044966941', '2.1709001484342463', '1.8322196774441322', '1.85518590338636', '1.6972426577597008', '1.764925086942855', '2.0140201412663408', '1.6599878080288313', '1.2016535723230852', '2.231027433182988', '2.1829846532288673', '1.2581616033449312', '1.2814532459489323', '1.856754381202331', '2.132632556754376', '2.3037117098890856', '1.7624861011620574', '1.776755797206281', '1.9867694488223449'],
    "categ": ['4', '2', '3', '3', '2', '4', '3', '2', '1', '3', '4', '2', '2', '2', '2', '4', '4', '4', '4', '4', '3', '1', '4', '1', '2', '2', '1', '3', '2', '4', '3', '4', '2', '2', '1', '2', '2', '4', '1', '2', '4', '1', '3', '4', '3', '4', '4', '3', '3', '4', '3', '4', '4', '3', '2', '4', '4', '3', '2', '4', '2', '4', '4', '1', '2', '4', '2', '1', '3', '4', '4', '4', '1', '1', '2', '1', '4', '1', '4', '4', '1', '1', '4', '4', '1', '1', '1', '1', '4', '1', '4', '1', '4', '4', '2', '4', '4', '1', '1', '4']

}

model = {"gauss": {"type": "Gaussian", "paramStr": ""}, "categ": {"type": "Multinomial", "paramStr": ""}}
algo = {
  "nClass": 2,
  "nInd": 100,
  "nbBurnInIter": 50,
  "nbIter": 50,
  "nbGibbsBurnInIter": 50,
  "nbGibbsIter": 50,
  "nInitPerClass": 20,
  "nSemTry": 10,
  "confidenceLevel": 0.95,
  "ratioStableCriterion": 0.95,
  "nStableCriterion": 10,
  "mode": "learn"
}

res = {}


outLearn = pyMixtComp.pmc(algo, data, model, res)

algo["mode"] = "predict"
outPredict = pyMixtComp.pmc(algo, data, model, outLearn)


